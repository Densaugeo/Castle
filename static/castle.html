<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="color-scheme" content="dark">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">

<title>A Castle in the Cloud</title>

<script type="importmap">
{
  "imports": {
    "three": "./three/three.module.js"
  }
}
</script>

<style>
html, body, lego-castle {
  position: absolute;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  
  margin: 0;
  border: none;
  padding: 0;
}
</style>

<script>
EventTarget.prototype.on = EventTarget.prototype.addEventListener

EventTarget.prototype.emit = function emit(type, properties) {
  const e = new Event(type)
  for(key in properties) {
    e[key] = properties[key]
  }
  this.dispatchEvent(e)
}
</script>
</head>
<body>
<lego-castle></lego-castle>
<!--
UI fragment from quaternion-test for comparison

<form id="quaternion_form">
  Real componenet:
  <input type="number" min="-1" step="0.01" max="1" name="real" value="1"></input>
  Vector component:
  <input type="number" min="-1" step="0.01" max="1" name="i" value="0"></input>  i
  <input type="number" min="-1" step="0.01" max="1" name="j" value="0"></input>  j
  <input type="number" min="-1" step="0.01" max="1" name="k" value="0"></input>  k
  Magnitude: <text id="quaternion_magnitude">1</text>
</form>
-->
</body>

<script type="module">
import * as index from './castle.js'
for(const key in index) window[key] = index[key]

window.lego_castle = document.getElementsByTagName('lego-castle')[0]

// WebGL occupies entire browser window
function resizer() {
  lego_castle.width  = window.innerWidth
  lego_castle.height = window.innerHeight
}
window.addEventListener('resize', resizer)
resizer()
</script>
</html>
